"use strict";(self.webpackChunktls_anvil_docs=self.webpackChunktls_anvil_docs||[]).push([[214],{3403:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var s=t(5893),i=t(1151);const r={},l="Development Environment Setup",o={id:"Adding-New-Tests/Setup-Dev-Environment",title:"Development Environment Setup",description:"First our repository needs to be cloned.",source:"@site/docs/05-Adding-New-Tests/01-Setup-Dev-Environment.md",sourceDirName:"05-Adding-New-Tests",slug:"/Adding-New-Tests/Setup-Dev-Environment",permalink:"/docs/Adding-New-Tests/Setup-Dev-Environment",draft:!1,unlisted:!1,editUrl:"https://github.com/tls-attacker/TLS-Anvil/tree/main/Docs/docs/05-Adding-New-Tests/01-Setup-Dev-Environment.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Adding New Tests",permalink:"/docs/category/adding-new-tests"},next:{title:"Test Template Example",permalink:"/docs/Adding-New-Tests/Test-Case-Example"}},c={},d=[{value:"Compile From Terminal",id:"compile-from-terminal",level:2},{value:"Setup IDE",id:"setup-ide",level:2},{value:"IDEA",id:"idea",level:3},{value:"Netbeans or other",id:"netbeans-or-other",level:3}];function a(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"development-environment-setup",children:"Development Environment Setup"}),"\n",(0,s.jsx)(n.p,{children:"First our repository needs to be cloned."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"git clone git://github.com/tls-attacker/TLS-Anvil\n"})}),"\n",(0,s.jsx)(n.h2,{id:"compile-from-terminal",children:"Compile From Terminal"}),"\n",(0,s.jsx)(n.p,{children:"TLS-Anvil depends on specific TLS-Attacker and TLS-Scanner as well as Anvil-Core as testing framework. Those are implemented as maven dependencies and should be fetched during build automatically."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mvn clean install -DskipTests\n"})}),"\n",(0,s.jsx)(n.p,{children:"TLS-Anvil can be started by executing the jar file."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd TLS-Testsuite/apps\njava -jar TLS-Testsuite.jar\n"})}),"\n",(0,s.jsx)(n.h2,{id:"setup-ide",children:"Setup IDE"}),"\n",(0,s.jsx)(n.p,{children:"TLS-Anvil was mainly developed in IntelliJ IDEA and Netbeans. Since IDEA offers a deeper JUnit integration, the following section explain a basic IDEA setup."}),"\n",(0,s.jsx)(n.h3,{id:"idea",children:"IDEA"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Open the TLS-Testsuite Project (",(0,s.jsx)(n.code,{children:"pom.xml"}),") in IntelliJ"]}),"\n",(0,s.jsxs)(n.li,{children:["Open the ",(0,s.jsx)(n.code,{children:"Project Structure"})," -> ",(0,s.jsx)(n.code,{children:"Module"})," Menu."]}),"\n",(0,s.jsxs)(n.li,{children:["Add the ",(0,s.jsx)(n.code,{children:"TLS-Test-Framework"})," (",(0,s.jsx)(n.code,{children:"TLS-Test-Framework/pom.xml"}),") as new Module"]}),"\n",(0,s.jsxs)(n.li,{children:["If you want or need to modify TLS-Attacker and TLS-Scanner as well (separate git repositories):","\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Add ",(0,s.jsx)(n.code,{children:"TLS-Attacker"})," (",(0,s.jsx)(n.code,{children:"TLS-Attacker/pom.xml"}),") as new Module"]}),"\n",(0,s.jsxs)(n.li,{children:["Add ",(0,s.jsx)(n.code,{children:"TLS-Scanner"})," (",(0,s.jsx)(n.code,{children:"TLS-Scanner/pom.xml"}),") as new Module"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The project should compile now."}),"\n",(0,s.jsxs)(n.p,{children:["Since TLS-Anvil uses JUnit as testing framework, a single test can be executed using the IDE. For example, if you open a TLS-Anvil test template inside the ",(0,s.jsx)(n.code,{children:"de.rub.nds.tlstest.suite.tests"})," package, a green play button is visible next to the test function."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(1729).Z+"",width:"1814",height:"806"})}),"\n",(0,s.jsx)(n.p,{children:"The example from the screenshot is a server test. Therefore, a TLS server needs to be running. However, this is not enough since TLS-Anvil needs to know how to connect to the server. Those option are configured by using the environment variables, that are equivalent to the regular TLS-Anvil CLI options."}),"\n",(0,s.jsx)(n.p,{children:"The recommended way is to edit the JUnit 5 template of IDEA."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Open the ",(0,s.jsx)(n.code,{children:"Edit configurations"})," from the command pallette"]}),"\n",(0,s.jsxs)(n.li,{children:["On the bottom left select ",(0,s.jsx)(n.code,{children:"Edit configuration templates"})]}),"\n",(0,s.jsxs)(n.li,{children:["Select ",(0,s.jsx)(n.code,{children:"JUnit"})]}),"\n",(0,s.jsx)(n.li,{children:"Configure the environment variables"}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"COMMAND_SERVER"})," to specify CLI options for testing a server",(0,s.jsx)(n.br,{}),"\n","Simple example:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"-networkInterface lo0 -parallelTestCases 1 -strength 1 server -connect localhost:8443 -doNotSendSNIExtension\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"COMMAND_CLIENT"})," to specify CLI options for testing a client",(0,s.jsx)(n.br,{}),"\n","Simple example:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"-networkInterface lo0 -parallelTestCases 1 -strength 1 client -port 8443 -triggerScript [path to script]\n"})}),"\n",(0,s.jsx)(n.p,{children:"When the environment variables are configured, it is possible to run a client or server test by clicking the green play buttons next to a function. The specified variables are used by TLS-Anvil to setup the test backend accordingly."}),"\n",(0,s.jsx)(n.h3,{id:"netbeans-or-other",children:"Netbeans or other"}),"\n",(0,s.jsx)(n.p,{children:"TLS-Anvil is based on Maven and can be compiled like any other Maven Java project. To only execute specific test templates during the development, the CLI of TLS-Anvil offers two options."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-testPackage [package]"})," runs all tests inside a specific Java package."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-tags [tag]"})," runs only test templates that are annotated with a specific tag. When you develop a new test case, annotate the test function temporarily with ",(0,s.jsx)(n.code,{children:'@Tag("tag")'})," to be able to only run this specific test template."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},1729:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/test_example-62ffe4bef7e13fde98c088bb9e13c678.png"},1151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>l});var s=t(7294);const i={},r=s.createContext(i);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);