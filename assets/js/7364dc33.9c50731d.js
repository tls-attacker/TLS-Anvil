"use strict";(self.webpackChunktls_anvil_docs=self.webpackChunktls_anvil_docs||[]).push([[130],{1753:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Quick-Start/Server-Testing","title":"Server Testing","description":"This site demonstrates how to test an OpenSSL server provided by the TLS-Docker-Library.","source":"@site/docs/01-Quick-Start/01-Server-Testing.md","sourceDirName":"01-Quick-Start","slug":"/Quick-Start/Server-Testing","permalink":"/docs/Quick-Start/Server-Testing","draft":false,"unlisted":false,"editUrl":"https://github.com/tls-attacker/TLS-Anvil/tree/main/Docs/docs/01-Quick-Start/01-Server-Testing.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Quick Start","permalink":"/docs/Quick-Start/index"},"next":{"title":"Client Testing","permalink":"/docs/Quick-Start/Client-Testing"}}');var s=t(4848),i=t(8453);const a={},o="Server Testing",l={},c=[{value:"Preparations",id:"preparations",level:3},{value:"Starting the OpenSSL Server",id:"starting-the-openssl-server",level:3},{value:"Starting TLS-Anvil",id:"starting-tls-anvil",level:3},{value:"What now?",id:"what-now",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"server-testing",children:"Server Testing"})}),"\n",(0,s.jsxs)(n.p,{children:["This site demonstrates how to test an OpenSSL server provided by the TLS-Docker-Library.\nYou can of course also test other implementations, for example by ",(0,s.jsx)(n.a,{href:"/docs/Docker-Library",children:"using the TLS-Docker-Library"})," or by running your own server binary."]}),"\n",(0,s.jsx)(n.p,{children:"Testing the server in the most simple form roughly takes around 10-20 minutes.\nHowever, this duration can increase to several depending on the strength parameter that basically defines how often a single test case is performed with different parameters."}),"\n",(0,s.jsx)(n.h3,{id:"preparations",children:"Preparations"}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The server image we will use, is prebuilt by us using the ",(0,s.jsx)(n.a,{href:"https://github.com/tls-attacker/tls-docker-library",children:"TLS-Docker-Library"}),".\nWe included certificates in the container, so that you do not have to generate them yourself."]})}),"\n",(0,s.jsx)(n.p,{children:"For better compatibility, we create a dedicated docker network that is used by TLS-Anvil and the OpenSSL server container to communicate with each other."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker network create tls-anvil\n"})}),"\n",(0,s.jsx)(n.h3,{id:"starting-the-openssl-server",children:"Starting the OpenSSL Server"}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"As mentioned before, we use OpenSSL as an example. In this case the server uses an RSA certificate. However, TLS-Anvil works with any certificate and automatically adapts the tests to the given circumstances."})}),"\n",(0,s.jsx)(n.p,{children:"Starting the server can be done with the following command. This will download a pre-built image from our GitHub registry, and run it."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:"docker run \\\n    -d \\\n    --rm \\\n    --name openssl-server \\\n    --network tls-anvil \\\n    -v cert-data:/certs/ \\\n    ghcr.io/tls-attacker/openssl-server:1.1.1i \\\n    -port 8443 \\\n    -cert /certs/rsa2048cert.pem \\\n    -key /certs/rsa2048key.pem\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Lines 2-6: Docker related command flags"}),"\n",(0,s.jsx)(n.li,{children:"Line 7: Specifies the Docker image from the TLS-Docker-Library"}),"\n",(0,s.jsxs)(n.li,{children:["Lines 8-10: Those flags are passed to the OpenSSL ",(0,s.jsx)(n.code,{children:"s_server"})," binary"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"starting-tls-anvil",children:"Starting TLS-Anvil"}),"\n",(0,s.jsxs)(n.p,{children:["After that, TLS-Anvil is started. The current directory is mounted to the docker container and used to store the results. We connect to the server using its docker hostname ",(0,s.jsx)(n.code,{children:"openssl-server"}),", which is possible since they are on the same docker network."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:"docker run \\\n    --rm \\\n    -it \\\n    --name tls-anvil \\\n    --network tls-anvil \\\n    -v $(pwd):/output/ \\\n    ghcr.io/tls-attacker/tlsanvil:latest \\\n    -zip \\\n    -parallelHandshakes 1 \\\n    -connectionTimeout 200 \\\n    -strength 1 \\\n    -identifier openssl-server \\\n    server \\\n    -connect openssl-server:8443\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Lines 2-5: Docker related command flags"}),"\n",(0,s.jsx)(n.li,{children:"Line 6: Set the output directory through a docker volume"}),"\n",(0,s.jsx)(n.li,{children:"Line 7: Specifies the TLS-Anvil docker image"}),"\n",(0,s.jsx)(n.li,{children:"Line 8: Zip the results, that way we can easily import them into Anvil-Web later"}),"\n",(0,s.jsx)(n.li,{children:"Line 9: Since the OpenSSL example server is single threaded, we can only perform one handshakes sequentially"}),"\n",(0,s.jsx)(n.li,{children:"Line 10: We run our server locally, so we can reduce the timeout to 200ms."}),"\n",(0,s.jsxs)(n.li,{children:["Line 11: Defines the strength, i.e. the ",(0,s.jsx)(n.code,{children:"t"})," for t-way combinatorial testing"]}),"\n",(0,s.jsx)(n.li,{children:"Line 13: We want to test a server"}),"\n",(0,s.jsx)(n.li,{children:"Line 14: Determines the details how TLS-Anvil should connect to the server"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"what-now",children:"What now?"}),"\n",(0,s.jsxs)(n.p,{children:["After the testsuite finished you should see a folder named ",(0,s.jsx)(n.code,{children:"Results_..."})," which contains all the results.\nTo analyze them, go to ",(0,s.jsx)(n.a,{href:"Anvil-Web",children:"Viewing Results"}),"."]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(6540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);