"use strict";(self.webpackChunktls_anvil_docs=self.webpackChunktls_anvil_docs||[]).push([[696],{1825:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"Advanced-Features/Expected-Results","title":"Compare with Expected Results","description":"TLS-Anvil supports verifying test outcomes by comparing them against a set of expected results. This is especially useful in CI/CD pipelines to detect regressions or unexpected behavior changes.","source":"@site/docs/03-Advanced-Features/03-Expected-Results.md","sourceDirName":"03-Advanced-Features","slug":"/Advanced-Features/Expected-Results","permalink":"/docs/Advanced-Features/Expected-Results","draft":false,"unlisted":false,"editUrl":"https://github.com/tls-attacker/TLS-Anvil/tree/main/Docs/docs/03-Advanced-Features/03-Expected-Results.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Profiles","permalink":"/docs/Advanced-Features/Profiles"},"next":{"title":"Architecture","permalink":"/docs/Architecture"}}');var r=t(4848),i=t(8453);const c={},l="Compare with Expected Results",d={},o=[{value:"Expected Results Format",id:"expected-results-format",level:2},{value:"Running with Expected Results",id:"running-with-expected-results",level:2},{value:"Behavior and Exit Codes",id:"behavior-and-exit-codes",level:2},{value:"Auto-Generating Expected Results",id:"auto-generating-expected-results",level:2}];function a(e){const s={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"compare-with-expected-results",children:"Compare with Expected Results"})}),"\n",(0,r.jsxs)(s.p,{children:["TLS-Anvil supports verifying test outcomes by comparing them against a set of ",(0,r.jsx)(s.strong,{children:"expected results"}),". This is especially useful in ",(0,r.jsx)(s.strong,{children:"CI/CD pipelines"})," to detect regressions or unexpected behavior changes."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"expected-results-format",children:"Expected Results Format"}),"\n",(0,r.jsxs)(s.p,{children:["The expected results must be defined in a ",(0,r.jsx)(s.strong,{children:"JSON file"})," mapping test IDs to expected outcomes."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",metastring:'showLineNumbers title="expected.json"',children:'{\n  "STRICTLY_SUCCEEDED": [ \n    "XLF-ia3wstdqYe",\n    "XLF-uQXeugeUkb"\n  ],\n  "CONCEPTUALLY_SUCCEEDED": [ \n    "XLF-tSjRqK81S8", \n    "XLF-ujMXSAMmVF" \n  ],\n  "FULLY_FAILED": [\n    "XLF-SA1CoksBgE",\n    "XLF-NFYNXBgXk8"\n  ],\n  "PARTIALLY_FAILED": [\n    "XLF-4iPUuT51YH",\n    "XLF-PkwVF7pRQa"\n  ],\n  "DISABLED": [\n    "XLF-CSQn3dUG9L",\n    "XLF-Ax6kVTgheY"\n  ]\n}\n'})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"\u26a0\ufe0f Make sure your JSON is valid (e.g. commas between entries). The above format groups test IDs by expected result category."}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"running-with-expected-results",children:"Running with Expected Results"}),"\n",(0,r.jsxs)(s.p,{children:["You can pass the expected results file using the ",(0,r.jsx)(s.code,{children:"-expectedResults"})," parameter:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",metastring:'showLineNumbers title="Run with Expected Results"',children:"docker run \\\n    --rm \\\n    -it \\\n    --name tls-anvil \\\n    --network tls-anvil \\\n    -v $(pwd):/output/ \\\n    -v ./expected.json:/expected.json \\\n    ghcr.io/tls-attacker/tlsanvil:latest \\\n    -expectedResults /expected.json \\\n    server \\\n    -connect localhost:8443\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"behavior-and-exit-codes",children:"Behavior and Exit Codes"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"TLS-Anvil runs all configured tests and compares the actual results to those in the expected results file."}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Accepted deviations"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Tests ",(0,r.jsx)(s.em,{children:"not listed"})," in the file that result in ",(0,r.jsx)(s.code,{children:"STRICTLY_SUCCEEDED"}),", ",(0,r.jsx)(s.code,{children:"CONCEPTUALLY_SUCCEEDED"}),", or ",(0,r.jsx)(s.code,{children:"DISABLED"})," are ",(0,r.jsx)(s.strong,{children:"ignored"})," (do not trigger errors)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Failing deviations"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Any other mismatch causes TLS-Anvil to:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Print a detailed difference report"}),"\n",(0,r.jsxs)(s.li,{children:["Exit with ",(0,r.jsxs)(s.strong,{children:["code ",(0,r.jsx)(s.code,{children:"1"})]})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"This behavior is designed for integration with automated testing environments."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"auto-generating-expected-results",children:"Auto-Generating Expected Results"}),"\n",(0,r.jsx)(s.p,{children:"After a test run, TLS-Anvil produces a file:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/output/result_map.json\n"})}),"\n",(0,r.jsxs)(s.p,{children:["This file contains the actual result mapping of all executed tests and can be reused as an ",(0,r.jsx)(s.strong,{children:"input for future expected results"}),". This enables automated tracking of test regressions between runs."]}),"\n",(0,r.jsx)(s.hr,{})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>c,x:()=>l});var n=t(6540);const r={},i=n.createContext(r);function c(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);