<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Docker-Library" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">Using the TLS-Docker-Library | TLS-Anvil</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tls-anvil.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://tls-anvil.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://tls-anvil.com/docs/Docker-Library"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Using the TLS-Docker-Library | TLS-Anvil"><meta data-rh="true" name="description" content="The TLS-Docker-Library is a set of Dockerfiles and scripts for building and running many different TLS implementations."><meta data-rh="true" property="og:description" content="The TLS-Docker-Library is a set of Dockerfiles and scripts for building and running many different TLS implementations."><link data-rh="true" rel="icon" href="/img/logo-only.png"><link data-rh="true" rel="canonical" href="https://tls-anvil.com/docs/Docker-Library"><link data-rh="true" rel="alternate" href="https://tls-anvil.com/docs/Docker-Library" hreflang="en"><link data-rh="true" rel="alternate" href="https://tls-anvil.com/docs/Docker-Library" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Using the TLS-Docker-Library","item":"https://tls-anvil.com/docs/Docker-Library"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="TLS-Anvil RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="TLS-Anvil Atom Feed"><link rel="stylesheet" href="/assets/css/styles.474645c8.css">
<script src="/assets/js/runtime~main.28240d3b.js" defer="defer"></script>
<script src="/assets/js/main.3cafa6ce.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo-only.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-only.png" alt="TLS-Anvil Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-only.png" alt="TLS-Anvil Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">TLS-Anvil</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Introduction">Docs</a><a class="navbar__item navbar__link" href="/publications">Publications</a><a class="navbar__item navbar__link" href="/blog">What&#x27;s New</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/tls-attacker/TLS-Anvil" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/Quick-Start/index">Quick Start</a><button aria-label="Expand sidebar category &#x27;Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Result-Analysis">TLS-Anvil Result Analysis</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Advanced-Features/Config-Files">Advanced-Features</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Architecture">Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/adding-new-tests">Adding New Tests</a><button aria-label="Expand sidebar category &#x27;Adding New Tests&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/Docker-Library">Using the TLS-Docker-Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Jenkins-Plugin">TLS-Anvil Jenkins Plugin</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Using the TLS-Docker-Library</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Using the TLS-Docker-Library</h1></header>
<p>The <a href="https://github.com/tls-attacker/Tls-docker-library" target="_blank" rel="noopener noreferrer">TLS-Docker-Library</a> is a set of Dockerfiles and scripts for building and running many different TLS implementations.
It can be used to test example server and client implementations of various TLS libraries.</p>
<p>You can follow the README file of the repository to learn, how to build the docker containers yourself.</p>
<p>In short, you need to</p>
<ul>
<li>run <code>./setup.sh</code> to generate the base images and certificates</li>
<li>go to <code>cd src/main/resources/images</code></li>
<li>run <code>python3 build.py -l image-name:version</code> with the name of the implementation as well as the version you would like to build<!-- -->
<ul>
<li>if you would like to build the newest version use <code>:latest</code></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-built-library-containers-using-tls-anvil">Testing Built Library Containers using TLS-Anvil<a href="#testing-built-library-containers-using-tls-anvil" class="hash-link" aria-label="Direct link to Testing Built Library Containers using TLS-Anvil" title="Direct link to Testing Built Library Containers using TLS-Anvil">​</a></h2>
<p>Once you built an image of a library you&#x27;d like to test, we have to create and start the container and then connect it to TLS-Anvil.</p>
<p>This procedure differs between server and client images.</p>
<p>To see how to create and run a container of your desired implementation, go to the subfolder of that implementation where you will find a readme file with more infos.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="server-images">Server Images<a href="#server-images" class="hash-link" aria-label="Direct link to Server Images" title="Direct link to Server Images">​</a></h3>
<p>Server images almost always just start a binary server example implementation of that library in a loop.</p>
<p>The arguments you pass to the docker container after the image name will get passed to the server executable. E.g. the image <code>openssl-server:1.1.1i</code> has the entrypoint <code>openssl s_server</code>. Any arguments that you pass after <code>docker run openssl-server:1.1.1i ...</code> are passed to the openssl executable.</p>
<p>Many of the server implementations need certificates. Many certificates were created when you ran <code>./setup.sh</code>. Those are stored in the docker volume <code>cert-data</code> and can be used with any image.</p>
<p>E.g. to start an OpenSSL server with an RSA certificate we can use:</p>
<p><code>docker run -v cert-data:/certs/ openssl-server:1.1.1i -port 8443 -cert /certs/rsa2048cert.pem -key /certs/rsa2048key.pem</code></p>
<p>The <code>-v</code> option bind the <code>cert-data</code> volume to the container at the location <code>/certs/</code>.</p>
<p>The server is now listening on port 8443, but since it is a container, the port is only accessible from inside the container. To be able to connect to it we have to:</p>
<ul>
<li>add the server container and TLS-Anvil container to the same docker network (like in our <a href="/docs/Quick-Start/Server-Testing">example</a>)</li>
<li>expose the port using <code>-p 8443:8443</code> or</li>
<li>add the docker container to the host network using <code>--network host</code></li>
</ul>
<p>If you added it to a network, the server will be reachable with its container name (can be changed by using <code>--name ...</code>), or via the other options, it should be reachable via <code>localhost:8443</code>.
This is, what you will need to input in the <code>-connect ...</code> parameter of TLS-Anvil.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-images">Client Images<a href="#client-images" class="hash-link" aria-label="Direct link to Client Images" title="Direct link to Client Images">​</a></h3>
<p>Client images implement a small web server that listens on port 8090. Command line arguments that you pass behind the image name also get passed directly to the client executable. But the client executable is not running in a loop, but rather only started when a GET request is sent to the <code>/trigger</code> endpoint of the webserver.</p>
<p>E.g. to start the OpenSSL client, we can run <code>docker run openssl-client:1.1.1i -connect localhost:8443</code> and the <code>-connect ...</code> part is directly passed to <code>openssl s_client</code>.</p>
<p>You have to make sure, that TLS-Anvil can reach the webserver (port 8090) of the client image, and the client can reach TLS-Anvil to connect to. This can be done by either:</p>
<ul>
<li>adding the client container and TLS-Anvil container to the same docker network (like in our <a href="/docs/Quick-Start/Client-Testing">example</a>)<!-- -->
<ul>
<li>the client can then connect to TLS-Anvil using its container name</li>
<li>TLS-Anvil can connect to the client using its container name</li>
</ul>
</li>
<li>exposing port the port 8090 on the client using <code>-p 8090:8090</code> and exposing the server listening port on the TLS-Anvil container if also run via docker<!-- -->
<ul>
<li>the client can then connect to TLS-Anvil using the ip <code>172.17.0.1</code> or <code>host.docker.internal</code></li>
<li>TLS-Anvil can reach the container using <code>172.17.0.1</code> or <code>host.docker.internal</code> if also run in a container or <code>localhost</code> if run in the host</li>
</ul>
</li>
<li>adding the client (and TLS-Anvil) to the host network using <code>--network host</code>
<ul>
<li>the client can then connect to TLS-Anvil using <code>localhost</code></li>
<li>TLS-Anvil can also connect to the client using <code>localhost</code></li>
</ul>
</li>
</ul>
<p>TLS-Anvil uses a <em>trigger script</em> in the client testing mode. The script is called every time it wants the client to connect to it. Using the TLS-Docker-Library images you almost always want to use <code>curl</code> in the trigger script to connect to the <code>/trigger</code> endpoint of the client.</p>
<p>An example would be <code>docker run --network host -v $(pwd):/output/  ghcr.io/tls-attacker/tlsanvil:latest client -port 8443 -triggerScript curl localhost:8090/trigger</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>You could also execute a binary of a client implementation directly in the <code>-triggerScript</code> parameter.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/tls-attacker/TLS-Anvil/tree/main/Docs/docs/06-Docker-Library.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Adding-New-Tests/Modifying-the-IPM-Model"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Modifying the IPM</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Jenkins-Plugin"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">TLS-Anvil Jenkins Plugin</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#testing-built-library-containers-using-tls-anvil" class="table-of-contents__link toc-highlight">Testing Built Library Containers using TLS-Anvil</a><ul><li><a href="#server-images" class="table-of-contents__link toc-highlight">Server Images</a></li><li><a href="#client-images" class="table-of-contents__link toc-highlight">Client Images</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://github.com/tls-attacker/TLS-Anvil" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 TLS-Anvil.</div></div></div></footer></div>
</body>
</html>